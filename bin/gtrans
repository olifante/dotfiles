#!/usr/bin/ruby -w

require 'rubygems'
require 'open-uri'
require 'json'

sl = 'en'
tl = 'fr'

if "fr" == ARGV[0]
	ARGV.shift
	sl, tl = tl, sl
end

argv = ARGV.join(' ')
exit if argv.empty?

url = URI.escape("http://translate.google.com/translate_a/t?client=t&text=#{argv}&hl=fr&sl=#{sl}&tl=#{tl}&pc=0")
res = open(url).read

json = JSON.parse(res)
text = json['sentences'][0]['trans']

puts text

exit
